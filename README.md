# Effective test

### Задача

> Реализовать сервис, который будет получать по апи ФИО, из открытых апи обогащать ответ наиболее вероятными возрастом, полом и национальностью и сохранять данные в БД. По запросу выдавать инфу о найденных людях. Необходимо реализовать следующее

<ol>
  <li>Выставить rest методы</li>
  <ol>
    <li>Для получения данных с различными фильтрами и пагинацией</li>
    <li>Для удаления по идентификатору</li>
    <li>Для изменения сущности</li>
    <li>Для добавления новых людей в формате</li>
  </ol>
  <code>
    {
      "name": "Dmitriy",
      "surname": "Ushakov",
      "patronymic": "Vasilevich" // необязательно
    }
  </code>
  <li>Корректное сообщение обогатить</li>
  <ol>
    <li>Возрастом - https://api.agify.io/?name=Dmitriy</li>
    <li>Полом - https://api.genderize.io/?name=Dmitriy</li>
    <li>Национальностью - https://api.nationalize.io/?name=Dmitriy</li>
  </ol>
  <li>Обогащенное сообщение положить в БД postgres (структура БД должна быть создана путем миграций)</li>
  <li>Покрыть код debug- и info-логами</li>
  <li>Вынести конфигурационные данные в .env</li>
</ol>
 

##  Запуск
```
make run
```

### Структура
```bash
├───cmd
├───config
├───dataset
├───internal
│   ├───app
│   ├───db
│   │   └───postgres
│   ├───handlers
│   ├───models
│   └───service
└───pkg
    ├───client
    │   └───postgresql
    ├───logger
    └───utils
```

### APIs
------------------------------------------------------------------------------------------

#### Получение пользователей
<details>
 <summary><code>GET</code> <code><b>/users?limit=10&offset=0&query=Anet</b></code> <code>(Получение пользователей)</code></summary>


##### Ответы

> | http code     | content-type                      | response                                                            |
> |---------------|-----------------------------------|---------------------------------------------------------------------|
> | `200`         | `application/json`                | `{"data":[],total:0}`                                                          |
> | `500`         | `application/json`                | `""`                                                                |

</details>

------------------------------------------------------------------------------------------

#### Создание пользователя
<details>
 <summary><code>POST</code> <code><b>/user</b></code> <code>(Создание пользователя)</code></summary>


##### Ответы

> | http code     | content-type                      | response                                                            |
> |---------------|-----------------------------------|---------------------------------------------------------------------|
> | `200`         | `application/json`                | `{"id":1}`                                                          |
> | `400`         | `application/json`                | `""`                                                                |
> | `500`         | `application/json`                | `""`                                                                |

</details>

------------------------------------------------------------------------------------------

#### Редактирование пользователя
<details>
 <summary><code>PUT</code> <code><b>/user/{id}</b></code> <code>(Редактирование пользователя)</code></summary>


##### Ответы

> | http code     | content-type                      | response                                                            |
> |---------------|-----------------------------------|---------------------------------------------------------------------|
> | `200`         | `application/json`                | `{"message":""}`                                                          |
> | `400`         | `application/json`                | `""`                                                                |
> | `500`         | `application/json`                | `""`                                                                |

</details>

------------------------------------------------------------------------------------------

#### Удаление пользователя
<details>
 <summary><code>DELETE</code> <code><b>/user/{id}</b></code> <code>(Удаление пользователя)</code></summary>


##### Ответы

> | http code     | content-type                      | response                                                            |
> |---------------|-----------------------------------|---------------------------------------------------------------------|
> | `200`         | `application/json`                | `{"message":""}`                                                          |
> | `400`         | `application/json`                | `""`                                                                |
> | `500`         | `application/json`                | `""`                                                                |

</details>

------------------------------------------------------------------------------------------